#!/bin/bash

# Проверяем количество переданных параметров
if [ "$#" -ne 1 ]; then
  echo "Ошибка: Необходимо передать ровно один параметр — путь к каталогу."
  echo "Использование: $0 <путь_к_каталогу>"
  exit 1
fi

# Путь к каталогу
DIRECTORY="$1"

# Проверяем существование каталога
if [ ! -d "$DIRECTORY" ]; then
  echo "Ошибка: Каталог '$DIRECTORY' не существует."
  exit 1
fi

# Имя архива
ARCHIVE_NAME="recent_files.tar.gz"

# Используем find для поиска файлов, изменённых в течение последних 48 часов, и создания архива
find "$DIRECTORY" -type f -mtime -2 -print0 | tar -czvf "$ARCHIVE_NAME" --null -T -

echo "Архив '$ARCHIVE_NAME' успешно создан с файлами, изменёнными в последние 48 часов в каталоге '$DIRECTORY'."
